{"version":3,"file":"eraseFirstResponseAndKeepFirstSystemChatContextShiftStrategy.js","sourceRoot":"","sources":["../../../../../src/evaluator/LlamaChat/utils/contextShiftStrategies/eraseFirstResponseAndKeepFirstSystemChatContextShiftStrategy.ts"],"names":[],"mappings":"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"}